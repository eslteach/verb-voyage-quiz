<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grammar Island Adventure</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="game-container">
    <h1>🌴 Grammar Island Adventure</h1>
    <div class="instructions"></div>
    <div id="question">Loading...</div>
    <input type="text" id="answer" autocomplete="off" placeholder="Type your answer here">
    <div id="feedback"></div>
    <button onclick="checkAnswer()">Submit</button>
    <div class="status">
      Level: <span id="level">1</span> |
      XP: <span id="xp">0</span> |
      Streak: <span id="streak">0</span>
    </div>
  </div>

  <script>
    let xp = 0;
    let level = 1;
    let streak = 0;
    let currentIndex = 0;
    let activeQuestions = [];

    const tiers = {
      1: {
        name: "Present Simple — Simple Shores",
        questions: [
          { prompt: "She ____ breakfast at 7.", answer: "eats" },
          { prompt: "They ____ soccer on Sundays.", answer: "play" },
          { prompt: "He ____ TV in the evening.", answer: "watches" },
          { prompt: "We ____ our grandparents weekly.", answer: "visit" },
          { prompt: "I ____ novels often.", answer: "read" }
        ]
      },
      2: {
        name: "Present Continuous — Continuous Cove",
        questions: [
          { prompt: "She ____ for her exam.", answer: "is studying" },
          { prompt: "They ____ a sandcastle.", answer: "are building" },
          { prompt: "He ____ through the park.", answer: "is running" },
          { prompt: "We ____ English together.", answer: "are learning" },
          { prompt: "I ____ a landscape.", answer: "am painting" },
          { prompt: "It ____ outside.", answer: "is raining" },
          { prompt: "You ____ dinner, right?", answer: "are cooking" }
        ]
      },
      3: {
        name: "Past Simple — History Hollow",
        questions: [
          { prompt: "She ____ to school yesterday.", answer: "walked" },
          { prompt: "They ____ video games last night.", answer: "played" },
          { prompt: "He ____ a letter to his friend.", answer: "wrote" },
          { prompt: "I ____ spaghetti for lunch.", answer: "ate" },
          { prompt: "We ____ a movie on Friday.", answer: "watched" },
          { prompt: "It ____ last winter.", answer: "snowed" },
          { prompt: "You ____ me last weekend.", answer: "called" }
        ]
      },
      4: {
        name: "Tense Challenge — Verb Valley",
        questions: [
          { prompt: "She usually ____ breakfast at 7.", answer: "eats" },
          { prompt: "Right now, they ____ soccer.", answer: "are playing" },
          { prompt: "He ____ TV last night.", answer: "watched" },
          { prompt: "We often ____ our grandparents.", answer: "visit" },
          { prompt: "I ____ a novel at the moment.", answer: "am reading" },
          { prompt: "Yesterday, it ____.", answer: "rained" },
          { prompt: "You ____ dinner every evening.", answer: "cook" }
        ]
      },
      5: {
        name: "Present Perfect — Perfect Peninsula",
        questions: [
          { prompt: "She ____ Paris several times.", answer: "has visited" },
          { prompt: "They ____ their homework.", answer: "have finished" },
          { prompt: "He ____ his glasses.", answer: "has broken" },
          { prompt: "We ____ that movie already.", answer: "have seen" },
          { prompt: "I ____ five books this month.", answer: "have read" },
          { prompt: "It ____ a lot lately.", answer: "has rained" },
          { prompt: "You ____ your keys again?", answer: "have lost" }
        ]
      },
      6: {
        name: "Past Perfect — Memory Marsh",
        questions: [
          { prompt: "She ____ before the show started.", answer: "had left" },
          { prompt: "They ____ dinner by 6.", answer: "had eaten" },
          { prompt: "He ____ before I arrived.", answer: "had fallen asleep" },
          { prompt: "We ____ our work before sunset.", answer: "had finished" },
          { prompt: "I ____ the tickets earlier.", answer: "had bought" },
          { prompt: "You ____ the book before school.", answer: "had read" },
          { prompt: "It ____ all night before the match.", answer: "had rained" }
        ]
      },
      7: {
        name: "Perfect Mix — Grammar Glacier",
        questions: [
          { prompt: "She ____ five books this month.", answer: "has read" },
          { prompt: "He ____ the report before the deadline.", answer: "had written" },
          { prompt: "I ____ to London last year.", answer: "went" },
          { prompt: "They ____ lunch before the movie began.", answer: "had finished" },
          { prompt: "We ____ that play already.", answer: "have seen" },
          { prompt: "You ____ your bag on the train.", answer: "lost" },
          { prompt: "It ____ raining before we arrived.", answer: "had started" }
        ]
      },
      8: {
        name: "Final Mix — Mixed Mountains",
        questions: [
          { prompt: "She usually ____ at 7.", answer: "eats" },
          { prompt: "Right now, he ____ a magazine.", answer: "is reading" },
          { prompt: "I ____ to the museum last weekend.", answer: "went" },
          { prompt: "We ____ our project yesterday.", answer: "finished" },
          { prompt: "They ____ a dog since 2019.", answer: "have had" },
          { prompt: "You ____ this morning before class.", answer: "had written" },
          { prompt: "It ____ raining before we arrived.", answer: "had started" },
          { prompt: "She ____ before I got there.", answer: "had left" },
          { prompt: "He ____ to Japan before the pandemic.", answer: "had travelled" },
          { prompt: "We ____ English since last summer.", answer: "have learned" }
        ]
      }
    };

    function loadLevelQuestions() {
      const tier = tiers[level] || tiers[1];
      activeQuestions = tier.questions;
      currentIndex = 0;

      document.getElementById("level").textContent = level;
      document.querySelector(".instructions").textContent = `🌴 Level ${level}: ${tier.name}`;
      document.getElementById("xp").textContent = xp;
      document.getElementById("streak").textContent = streak;

      loadQuestion();
    }

    function loadQuestion() {
      const q = activeQuestions[currentIndex];
      document.getElementById("question").textContent = q.prompt;
      document.getElementById("answer").value = "";
      document.getElementById("feedback").textContent = "";
      document.getElementById("answer").focus();
    }

    function checkAnswer() {
      const input = document.getElementById("answer").value.trim().toLowerCase();
      const correctAnswer = activeQuestions[currentIndex].answer;
      const correct = correctAnswer.toLowerCase();
      const feedback = document.getElementById("feedback");

      if (input === correct) {
        xp += 10;
        streak++;
        feedback.textContent = "✅ Correct!";
        if (streak % 3 === 0) {
          xp += 5;
          feedback.textContent += " Bonus XP for a 3-answer streak!";
        }
      } else {
        feedback.textContent = `❌ Incorrect. The correct answer is '${correctAnswer}'.`;
        streak = 0;
      }

      document.getElementById("xp").textContent = xp;
      document.getElementById("streak").textContent = streak;

      currentIndex++;
      if (currentIndex >= activeQuestions.length) {
        level++;
        if (level > 8) {
          alert("🏁 Congratulations! You've completed all levels!");
          document.getElementById("question").textContent = "The adventure is complete!";
          document.getElementById("answer").disabled = true;
          document.querySelector("button").disabled = true;
          return;
        }

        setTimeout(() => {
          alert("🎉 Level up! New island unlocked!");
          loadLevelQuestions();
        }, 1000);
      } else {
        setTimeout(loadQuestion, 1500);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadLevelQuestions();
      document.getElementById("answer").addEventListener("keydown", function (e) {
        if (e.key === "Enter") {
          checkAnswer();
        }
      });
    });
  </script>
<script src="script.js"></script>
</html>
